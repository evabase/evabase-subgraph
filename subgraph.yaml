specVersion: 0.0.5
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum
    name: LOBExchange
    network: rinkeby
    source:
      address: '0xbE91fEFD8d3d1AD0A10aD38934e061A97ac3071e'
      abi: LOBExchange
      startBlock: 10740951 
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FlowEntity
      abis:
        - name: LOBExchange
          file: ./abis/LOBExchange.abi.json
      eventHandlers:
        - event: ConfigChanged((bool,uint64,address))
          handler: handleConfigChanged
        - event: OrderCancelled(indexed bytes32,uint256)
          handler: handleOrderCancelled
        - event: OrderCreated(indexed bytes32,indexed address,uint256)
          handler: handleOrderCreated
        - event: OrderExecuted(indexed bytes32,uint256,uint256)
          handler: handleOrderExecuted
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: StrategyChanged(address)
          handler: handleStrategyChanged
      file: ./src/lobmapping.ts

  - kind: ethereum
    name: EvaFlowController
    network: rinkeby
    source:
      address: '0xd4a2660d53F757f91E730Db3727cD24E57106f47'
      abi: EvaFlowController
      startBlock: 10740951
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FlowEntity
      abis:
        - name: EvaFlowController
          file: ./abis/EvaFlowController.abi.json
        - name: LOBExchange
          file: ./abis/LOBExchange.abi.json
      eventHandlers:
        - event: FlowClosed(indexed address,uint256)
          handler: handleFlowClosed
        - event: FlowCreated(indexed address,indexed uint256,address,bytes,uint256)
          handler: handleFlowCreated
        - event: FlowExecuteFailed(indexed address,indexed uint256,uint120,uint120,uint256,string)
          handler: handleFlowExecuteFailed
        - event: FlowExecuteSuccess(indexed address,indexed uint256,uint120,uint120,uint256)
          handler: handleFlowExecuteSuccess
        - event: FlowUpdated(indexed address,uint256,address)
          handler: handleFlowUpdated
      file: ./src/mapping.ts
  - kind: ethereum
    name: NftLimitOrderFlowProxy
    network: rinkeby
    source:
      address: '0xF2D0Ed1914543d3D22B3b770CBF8A183C7Bc4a8f'
      abi: NftLimitOrderFlowProxy
      startBlock: 10740951 
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FlowEntity
      abis:
        - name: NftLimitOrderFlowProxy
          file: ./abis/NftLimitOrderFlowProxy.abi.json
      eventHandlers:
        - event: OrderCancelled(indexed address,bytes32)
          handler: handleOrderCancelled
        - event: OrderCreated(indexed address,indexed uint256,(address,address,uint256,uint256,uint256,uint256,uint256))
          handler: handleOrderCreated
        - event: OrderExecuted(indexed address,bytes32,uint256,uint256)
          handler: handleOrderExecuted
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
      file: ./src/nftmapping.ts

  - kind: ethereum
    name: OpsFlowProxy
    network: rinkeby
    source:
      address: '0x3e235E74BE64FaE98A2CA18E6fe72Dc562541AfC'
      abi: OpsFlowProxy
      startBlock: 10740951
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.5
      language: wasm/assemblyscript
      entities:
        - FlowEntity
      abis:
        - name: OpsFlowProxy
          file: ./abis/OpsFlowProxy.abi.json
      eventHandlers:
        - event: OwnershipTransferred(indexed address,indexed address)
          handler: handleOwnershipTransferred
        - event: TaskCancelled(indexed address,uint256)
          handler: handleTaskCancelled
        - event: TaskCreated(indexed address,indexed uint256,(address,bytes[],uint64,uint64,uint64,uint64))
          handler: handleTaskCreated
        - event: TaskExecuted(indexed uint256)
          handler: handleTaskExecuted
      file: ./src/opsmapping.ts
